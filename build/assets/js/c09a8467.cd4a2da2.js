"use strict";(self.webpackChunkphysical_ai_humanoid_robotics_textbook=self.webpackChunkphysical_ai_humanoid_robotics_textbook||[]).push([[197],{335:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>a,contentTitle:()=>l,default:()=>h,frontMatter:()=>o,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"modules/m2-digital-twin/m2-gazebo-physics","title":"Lesson 1: Gazebo Physics Simulation","description":"Master Gazebo for physics-accurate robot simulation. Configure physics engines, set up worlds, and simulate complex interactions.","source":"@site/docs/modules/m2-digital-twin/m2-gazebo-physics.mdx","sourceDirName":"modules/m2-digital-twin","slug":"/modules/m2-digital-twin/m2-gazebo-physics","permalink":"/docs/modules/m2-digital-twin/m2-gazebo-physics","draft":false,"unlisted":false,"editUrl":"https://github.com/Danishhshahid/Physical-AI-Humanoid-Robotics-Book/tree/main/website/docs/modules/m2-digital-twin/m2-gazebo-physics.mdx","tags":[],"version":"current","frontMatter":{"id":"m2-gazebo-physics","title":"Lesson 1: Gazebo Physics Simulation","sidebar_label":"L1: Gazebo Physics","description":"Master Gazebo for physics-accurate robot simulation. Configure physics engines, set up worlds, and simulate complex interactions."},"sidebar":"tutorialSidebar","previous":{"title":"M2: Overview","permalink":"/docs/modules/m2-digital-twin/m2-overview"},"next":{"title":"L2: Unity Rendering","permalink":"/docs/modules/m2-digital-twin/m2-unity-rendering"}}');var s=i(4848),t=i(8453);const o={id:"m2-gazebo-physics",title:"Lesson 1: Gazebo Physics Simulation",sidebar_label:"L1: Gazebo Physics",description:"Master Gazebo for physics-accurate robot simulation. Configure physics engines, set up worlds, and simulate complex interactions."},l=void 0,a={},d=[{value:"What is Gazebo?",id:"what-is-gazebo",level:2},{value:"Installing Gazebo",id:"installing-gazebo",level:2},{value:"Creating Your First World",id:"creating-your-first-world",level:2},{value:"Loading URDF Models",id:"loading-urdf-models",level:2},{value:"Physics Engine Comparison",id:"physics-engine-comparison",level:2},{value:"Simulating Gravity and Friction",id:"simulating-gravity-and-friction",level:2},{value:"Adjust gravity:",id:"adjust-gravity",level:3},{value:"Adjust friction:",id:"adjust-friction",level:3},{value:"Monitoring Simulation in Python",id:"monitoring-simulation-in-python",level:2},{value:"Setting Object Physics Properties",id:"setting-object-physics-properties",level:2},{value:"Troubleshooting Simulation Issues",id:"troubleshooting-simulation-issues",level:2},{value:"Next Lesson",id:"next-lesson",level:2},{value:"Hands-On Project",id:"hands-on-project",level:2}];function c(n){const e={a:"a",code:"code",h2:"h2",h3:"h3",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,t.R)(),...n.components};return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(e.h2,{id:"what-is-gazebo",children:"What is Gazebo?"}),"\n",(0,s.jsxs)(e.p,{children:[(0,s.jsx)(e.strong,{children:"Gazebo"})," is the industry-standard physics simulator for ROS 2 robots. It provides:"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Rigid body dynamics"}),": ODE, Bullet, or DART engines"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Contact simulation"}),": Collisions, friction, rolling"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Gravity and forces"}),": Accurate physics"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Plugin system"}),": Extend with custom behavior"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"ROS 2 integration"}),": Native support"]}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Current versions:"}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Gazebo Classic"})," (11+): Legacy, widely used"]}),"\n",(0,s.jsxs)(e.li,{children:[(0,s.jsx)(e.strong,{children:"Gazebo Ignition"}),": Modern, recommended for new projects"]}),"\n"]}),"\n",(0,s.jsx)(e.h2,{id:"installing-gazebo",children:"Installing Gazebo"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# For ROS 2 Humble on Ubuntu 22.04\r\nsudo apt install ros-humble-gazebo-ros\r\nsudo apt install ros-humble-gazebo-ros-pkgs\r\n\r\n# Verify\r\ngazebo --version\n"})}),"\n",(0,s.jsx)(e.h2,{id:"creating-your-first-world",children:"Creating Your First World"}),"\n",(0,s.jsxs)(e.p,{children:["Create a file: ",(0,s.jsx)(e.code,{children:"my_world.sdf"})]}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<?xml version="1.0"?>\r\n<sdf version="1.6">\r\n  <world name="robot_world">\r\n\r\n    \x3c!-- Physics engine --\x3e\r\n    <physics name="default_physics" type="ode">\r\n      <max_step_size>0.001</max_step_size>     \x3c!-- 1 ms timestep --\x3e\r\n      <real_time_factor>1.0</real_time_factor> \x3c!-- Real-time speed --\x3e\r\n      <gravity>0 0 -9.81</gravity>\r\n      <ode>\r\n        <solver>\r\n          <type>quick</type>\r\n          <iterations>50</iterations>\r\n          <precon_iterations>0</precon_iterations>\r\n        </solver>\r\n        <constraints>\r\n          <cfm>0</cfm>\r\n          <erp>0.2</erp>\r\n        </constraints>\r\n      </ode>\r\n    </physics>\r\n\r\n    \x3c!-- Lighting --\x3e\r\n    <light name="sun" type="directional">\r\n      <cast_shadows>true</cast_shadows>\r\n      <pose>0 0 10 0 0 0</pose>\r\n      <diffuse>0.8 0.8 0.8 1</diffuse>\r\n      <specular>0.8 0.8 0.8 1</specular>\r\n      <direction>-0.5 0.1 -0.9</direction>\r\n    </light>\r\n\r\n    \x3c!-- Ground plane --\x3e\r\n    <model name="ground_plane">\r\n      <static>true</static>\r\n      <link name="link">\r\n        <collision name="collision">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <surface>\r\n            <contact>\r\n              <collide_bitmask>0xffff</collide_bitmask>\r\n            </contact>\r\n            <friction>\r\n              <ode>\r\n                <mu>0.6</mu>\r\n                <mu2>0.6</mu2>\r\n              </ode>\r\n            </friction>\r\n          </surface>\r\n        </collision>\r\n        <visual name="visual">\r\n          <geometry>\r\n            <plane>\r\n              <normal>0 0 1</normal>\r\n              <size>100 100</size>\r\n            </plane>\r\n          </geometry>\r\n          <material>\r\n            <script>\r\n              <uri>file://media/materials/scripts/gazebo.material</uri>\r\n              <name>Gazebo/Grey</name>\r\n            <\/script>\r\n          </material>\r\n        </visual>\r\n      </link>\r\n    </model>\r\n\r\n    \x3c!-- Robot model (loaded separately) --\x3e\r\n    <include>\r\n      <uri>model://humanoid_arm</uri>\r\n      <pose>0 0 1 0 0 0</pose>\r\n    </include>\r\n\r\n    \x3c!-- ROS 2 bridge plugin --\x3e\r\n    <plugin filename="ignition-gazebo-ros-init-system" name="ignition::gazebo::systems::RosInit">\r\n    </plugin>\r\n    <plugin filename="ignition-gazebo-ros-clock-system" name="ignition::gazebo::systems::RosClock">\r\n    </plugin>\r\n\r\n  </world>\r\n</sdf>\n'})}),"\n",(0,s.jsx)(e.h2,{id:"loading-urdf-models",children:"Loading URDF Models"}),"\n",(0,s.jsx)(e.p,{children:"Convert URDF to SDF and launch in Gazebo:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-bash",children:"# Convert URDF to SDF\r\ngz sdf convert humanoid.urdf -o humanoid.sdf\r\n\r\n# Launch Gazebo with your world\r\ngazebo my_world.sdf\r\n\r\n# Or use ROS 2 launch\r\nros2 launch gazebo_ros gazebo.launch.py world:=my_world.sdf\n"})}),"\n",(0,s.jsx)(e.h2,{id:"physics-engine-comparison",children:"Physics Engine Comparison"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Engine"}),(0,s.jsx)(e.th,{children:"Accuracy"}),(0,s.jsx)(e.th,{children:"Speed"}),(0,s.jsx)(e.th,{children:"Use Case"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"ODE"})}),(0,s.jsx)(e.td,{children:"Medium"}),(0,s.jsx)(e.td,{children:"Fast"}),(0,s.jsx)(e.td,{children:"Most robots, real-time"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"Bullet"})}),(0,s.jsx)(e.td,{children:"High"}),(0,s.jsx)(e.td,{children:"Medium"}),(0,s.jsx)(e.td,{children:"Complex contacts, accurate"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:(0,s.jsx)(e.strong,{children:"DART"})}),(0,s.jsx)(e.td,{children:"Very High"}),(0,s.jsx)(e.td,{children:"Slow"}),(0,s.jsx)(e.td,{children:"Humanoid walking (bipedal)"})]})]})]}),"\n",(0,s.jsxs)(e.p,{children:["For humanoids, ",(0,s.jsx)(e.strong,{children:"DART"})," is preferred because it handles:"]}),"\n",(0,s.jsxs)(e.ul,{children:["\n",(0,s.jsx)(e.li,{children:"Balance and center-of-mass"}),"\n",(0,s.jsx)(e.li,{children:"Bipedal locomotion"}),"\n",(0,s.jsx)(e.li,{children:"Complex foot-ground interactions"}),"\n"]}),"\n",(0,s.jsx)(e.p,{children:"Switch engine in SDF:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<physics name="default_physics" type="dart">  \x3c!-- Change here --\x3e\r\n  \x3c!-- DART-specific config --\x3e\r\n</physics>\n'})}),"\n",(0,s.jsx)(e.h2,{id:"simulating-gravity-and-friction",children:"Simulating Gravity and Friction"}),"\n",(0,s.jsx)(e.h3,{id:"adjust-gravity",children:"Adjust gravity:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:"<gravity>0 0 -9.81</gravity>  \x3c!-- Standard Earth --\x3e\r\n<gravity>0 0 -1.62</gravity>  \x3c!-- Moon --\x3e\r\n<gravity>0 0 -3.71</gravity>  \x3c!-- Mars --\x3e\n"})}),"\n",(0,s.jsx)(e.h3,{id:"adjust-friction",children:"Adjust friction:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:"<friction>\r\n  <ode>\r\n    <mu>0.6</mu>      \x3c!-- \u03bc static friction --\x3e\r\n    <mu2>0.6</mu2>    \x3c!-- \u03bc kinetic friction --\x3e\r\n  </ode>\r\n</friction>\n"})}),"\n",(0,s.jsx)(e.h2,{id:"monitoring-simulation-in-python",children:"Monitoring Simulation in Python"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-python",children:"import rclpy\r\nfrom rclpy.node import Node\r\nfrom gazebo_msgs.msg import ModelStates\r\nimport numpy as np\r\n\r\nclass SimulationMonitor(Node):\r\n    def __init__(self):\r\n        super().__init__('simulation_monitor')\r\n\r\n        # Subscribe to all model poses\r\n        self.subscription = self.create_subscription(\r\n            ModelStates,\r\n            '/gazebo/model_states',\r\n            self.model_states_callback,\r\n            10\r\n        )\r\n\r\n        self.get_logger().info(\"Monitoring Gazebo simulation\")\r\n\r\n    def model_states_callback(self, msg):\r\n        # Print all models and their positions\r\n        for i, name in enumerate(msg.name):\r\n            pose = msg.pose[i]\r\n            vel = msg.twist[i]\r\n\r\n            self.get_logger().info(\r\n                f\"{name}: pos=({pose.position.x:.2f}, {pose.position.y:.2f}, {pose.position.z:.2f}), \"\r\n                f\"vel=({vel.linear.x:.2f}, {vel.linear.y:.2f}, {vel.linear.z:.2f})\"\r\n            )\r\n\r\ndef main(args=None):\r\n    rclpy.init(args=args)\r\n    monitor = SimulationMonitor()\r\n    rclpy.spin(monitor)\r\n    monitor.destroy_node()\r\n    rclpy.shutdown()\r\n\r\nif __name__ == '__main__':\r\n    main()\n"})}),"\n",(0,s.jsx)(e.h2,{id:"setting-object-physics-properties",children:"Setting Object Physics Properties"}),"\n",(0,s.jsx)(e.p,{children:"Add physics properties to URDF:"}),"\n",(0,s.jsx)(e.pre,{children:(0,s.jsx)(e.code,{className:"language-xml",children:'<link name="object_link">\r\n  <inertial>\r\n    <mass value="1.0"/>\r\n    <inertia ixx="0.01" ixy="0" ixz="0"\r\n             iyy="0.01" iyz="0" izz="0.01"/>\r\n  </inertial>\r\n\r\n  <collision>\r\n    <geometry>\r\n      <box size="0.1 0.1 0.1"/>\r\n    </geometry>\r\n    <surface>\r\n      <contact>\r\n        <ode>\r\n          <max_vel>0.0</max_vel>\r\n          <min_depth>0.001</min_depth>\r\n        </ode>\r\n      </contact>\r\n      <friction>\r\n        <ode>\r\n          <mu>0.4</mu>\r\n          <mu2>0.4</mu2>\r\n        </ode>\r\n      </friction>\r\n    </surface>\r\n  </collision>\r\n\r\n  <visual>\r\n    <geometry>\r\n      <box size="0.1 0.1 0.1"/>\r\n    </geometry>\r\n    <material name="red">\r\n      <color rgba="1 0 0 1"/>\r\n    </material>\r\n  </visual>\r\n</link>\n'})}),"\n",(0,s.jsx)(e.h2,{id:"troubleshooting-simulation-issues",children:"Troubleshooting Simulation Issues"}),"\n",(0,s.jsxs)(e.table,{children:[(0,s.jsx)(e.thead,{children:(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.th,{children:"Problem"}),(0,s.jsx)(e.th,{children:"Solution"})]})}),(0,s.jsxs)(e.tbody,{children:[(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:'Robot "explodes"'}),(0,s.jsx)(e.td,{children:"Reduce timestep, increase solver iterations"})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Jittering"}),(0,s.jsxs)(e.td,{children:["Increase ",(0,s.jsx)(e.code,{children:"max_contacts"}),", tune friction"]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Slow simulation"}),(0,s.jsxs)(e.td,{children:["Lower ",(0,s.jsx)(e.code,{children:"real_time_factor"}),", reduce collision meshes"]})]}),(0,s.jsxs)(e.tr,{children:[(0,s.jsx)(e.td,{children:"Unrealistic motion"}),(0,s.jsx)(e.td,{children:"Check mass/inertia, adjust friction coefficients"})]})]})]}),"\n",(0,s.jsx)(e.h2,{id:"next-lesson",children:"Next Lesson"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.a,{href:"/docs/modules/m2-digital-twin/m2-unity-rendering",children:"Lesson 2: Unity Rendering & Visualization"})}),"\n",(0,s.jsx)(e.h2,{id:"hands-on-project",children:"Hands-On Project"}),"\n",(0,s.jsx)(e.p,{children:(0,s.jsx)(e.strong,{children:"Simulate a humanoid arm picking up an object:"})}),"\n",(0,s.jsxs)(e.ol,{children:["\n",(0,s.jsx)(e.li,{children:"Create a simple world with a table and cube"}),"\n",(0,s.jsx)(e.li,{children:"Load your humanoid arm URDF"}),"\n",(0,s.jsx)(e.li,{children:"Monitor object position as arm moves"}),"\n",(0,s.jsx)(e.li,{children:"Verify gravity and friction effects"}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,t.R)(),...n.components};return e?(0,s.jsx)(e,{...n,children:(0,s.jsx)(c,{...n})}):c(n)}},8453:(n,e,i)=>{i.d(e,{R:()=>o,x:()=>l});var r=i(6540);const s={},t=r.createContext(s);function o(n){const e=r.useContext(t);return r.useMemo(function(){return"function"==typeof n?n(e):{...e,...n}},[e,n])}function l(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:o(n.components),r.createElement(t.Provider,{value:e},n.children)}}}]);